"use strict";(()=>{var e={};e.id=231,e.ids=[231],e.modules={3480:(e,t,r)=>{e.exports=r(5600)},3526:(e,t,r)=>{r.r(t),r.d(t,{config:()=>l,default:()=>c,routeModule:()=>m});var n={};r.r(n),r.d(n,{default:()=>d});var a=r(3480),s=r(8667),o=r(6435),i=r(9194),u=r(8011);async function d(e,t){if("PUT"!==e.method)return t.setHeader("Allow",["PUT"]),t.status(405).json({message:`Method ${e.method} Not Allowed`});let{id:r}=e.query,{status:n}=e.body;if(!r||"string"!=typeof r)return t.status(400).json({message:"Bad Request",error:"Contact ID is required"});if(!n||!["Received","Progress","Done"].includes(n))return t.status(400).json({message:"Bad Request",error:"Valid status (Received, Progress, or Done) is required"});try{await (0,i.A)();let e=await u.A.findByIdAndUpdate(r,{status:n,is_read:!0},{new:!0}).select("-__v").lean();if(!e)return t.status(404).json({message:"Not Found",error:"Contact message not found"});return t.status(200).json({message:"Contact status updated successfully",data:{id:e._id.toString(),status:e.status,is_read:e.is_read}})}catch(e){return console.error("Error updating contact status:",e),t.status(500).json({message:"Error updating contact status",error:e.message||"Internal Server Error"})}}let c=(0,o.M)(n,"default"),l=(0,o.M)(n,"config"),m=new a.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/contacts/update-status",pathname:"/api/contacts/update-status",bundlePath:"",filename:""},userland:n})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8011:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6037),a=r.n(n);let s=new n.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,maxlength:[100,"Name cannot exceed 100 characters"]},email:{type:String,required:[!0,"Email is required"],trim:!0,lowercase:!0,match:[/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Please provide a valid email address"]},phone:{type:String,trim:!0,maxlength:[20,"Phone number cannot exceed 20 characters"]},company:{type:String,trim:!0,maxlength:[100,"Company name cannot exceed 100 characters"]},message:{type:String,required:[!0,"Message is required"],trim:!0,maxlength:[5e3,"Message cannot exceed 5000 characters"]},status:{type:String,enum:["Received","Progress","Done"],default:"Received"},is_read:{type:Boolean,default:!1}},{timestamps:!0});s.index({email:1}),s.index({createdAt:-1});let o=a().models.Contact||a().model("Contact",s)},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9194:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6037),a=r.n(n);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let i=async function(){if(o.conn)return o.conn;o.promise||(o.promise=a().connect(s,{bufferCommands:!1}));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=3526);module.exports=r})();