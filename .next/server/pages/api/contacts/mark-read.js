"use strict";(()=>{var e={};e.id=177,e.ids=[177],e.modules={3480:(e,r,t)=>{e.exports=t(5600)},3840:(e,r,t)=>{t.r(r),t.d(r,{config:()=>m,default:()=>u,routeModule:()=>l});var n={};t.r(n),t.d(n,{default:()=>c});var a=t(3480),o=t(8667),s=t(6435),i=t(9194),d=t(8011);async function c(e,r){if("PUT"!==e.method)return r.setHeader("Allow",["PUT"]),r.status(405).json({message:`Method ${e.method} Not Allowed`});let{id:t}=e.query;if(!t||"string"!=typeof t)return r.status(400).json({message:"Bad Request",error:"Contact ID is required"});try{await (0,i.A)();let e=await d.A.findByIdAndUpdate(t,{is_read:!0},{new:!0}).select("-__v").lean();if(!e)return r.status(404).json({message:"Not Found",error:"Contact message not found"});return r.status(200).json({message:"Contact marked as read",data:{id:e._id.toString(),is_read:e.is_read}})}catch(e){return console.error("Error marking contact as read:",e),r.status(500).json({message:"Error marking contact as read",error:e.message||"Internal Server Error"})}}let u=(0,s.M)(n,"default"),m=(0,s.M)(n,"config"),l=new a.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/contacts/mark-read",pathname:"/api/contacts/mark-read",bundlePath:"",filename:""},userland:n})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},8011:(e,r,t)=>{t.d(r,{A:()=>s});var n=t(6037),a=t.n(n);let o=new n.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,maxlength:[100,"Name cannot exceed 100 characters"]},email:{type:String,required:[!0,"Email is required"],trim:!0,lowercase:!0,match:[/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Please provide a valid email address"]},phone:{type:String,trim:!0,maxlength:[20,"Phone number cannot exceed 20 characters"]},company:{type:String,trim:!0,maxlength:[100,"Company name cannot exceed 100 characters"]},message:{type:String,required:[!0,"Message is required"],trim:!0,maxlength:[5e3,"Message cannot exceed 5000 characters"]},status:{type:String,enum:["Received","Progress","Done"],default:"Received"},is_read:{type:Boolean,default:!1}},{timestamps:!0});o.index({email:1}),o.index({createdAt:-1});let s=a().models.Contact||a().model("Contact",o)},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9194:(e,r,t)=>{t.d(r,{A:()=>i});var n=t(6037),a=t.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let i=async function(){if(s.conn)return s.conn;s.promise||(s.promise=a().connect(o,{bufferCommands:!1}));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=3840);module.exports=t})();