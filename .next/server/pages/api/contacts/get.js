"use strict";(()=>{var e={};e.id=573,e.ids=[573],e.modules={3480:(e,t,r)=>{e.exports=r(5600)},3806:(e,t,r)=>{r.r(t),r.d(t,{config:()=>m,default:()=>u,routeModule:()=>d});var n={};r.r(n),r.d(n,{default:()=>l});var a=r(3480),o=r(8667),i=r(6435),s=r(9194),c=r(8011);async function l(e,t){if("GET"!==e.method)return t.setHeader("Allow",["GET"]),t.status(405).json({message:`Method ${e.method} Not Allowed`});try{await (0,s.A)();let r=parseInt(e.query.page)||1,n=parseInt(e.query.limit)||10,a=e.query.email,o={};a&&(o.email=a.toLowerCase());let i=await c.A.find(o).sort({createdAt:-1}).skip((r-1)*n).limit(n).select("-__v").lean(),l=await c.A.countDocuments(o);return t.status(200).json({message:"Contacts retrieved successfully",data:i,count:l})}catch(e){return console.error("Error retrieving contacts from database:",e),t.status(500).json({message:"Error retrieving contacts",error:e.message||"Internal Server Error"})}}let u=(0,i.M)(n,"default"),m=(0,i.M)(n,"config"),d=new a.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/contacts/get",pathname:"/api/contacts/get",bundlePath:"",filename:""},userland:n})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8011:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6037),a=r.n(n);let o=new n.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,maxlength:[100,"Name cannot exceed 100 characters"]},email:{type:String,required:[!0,"Email is required"],trim:!0,lowercase:!0,match:[/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Please provide a valid email address"]},phone:{type:String,trim:!0,maxlength:[20,"Phone number cannot exceed 20 characters"]},company:{type:String,trim:!0,maxlength:[100,"Company name cannot exceed 100 characters"]},message:{type:String,required:[!0,"Message is required"],trim:!0,maxlength:[5e3,"Message cannot exceed 5000 characters"]},status:{type:String,enum:["Received","Progress","Done"],default:"Received"}},{timestamps:!0});o.index({email:1}),o.index({createdAt:-1});let i=a().models.Contact||a().model("Contact",o)},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9194:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(6037),a=r.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=i);let s=async function(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(o,{bufferCommands:!1}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=3806);module.exports=r})();