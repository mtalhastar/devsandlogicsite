"use strict";(()=>{var e={};e.id=421,e.ids=[421],e.modules={475:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>l,routeModule:()=>m});var i={};r.r(i),r.d(i,{default:()=>u});var n=r(3480),o=r(8667),s=r(6435),a=r(9194),d=r(944);async function u(e,t){if("PUT"!==e.method)return t.setHeader("Allow",["PUT"]),t.status(405).json({message:`Method ${e.method} Not Allowed`});let{id:r}=e.query,{title:i,short_description:n,platform:o,role:s,icon:u,gradient:l,challenge:c,solutions:m,technologies:p,outcomes:g,is_published:f}=e.body;if(!r||"string"!=typeof r)return t.status(400).json({message:"Bad Request",error:"Case study ID is required"});if(!i||!n||!o||!c)return t.status(400).json({message:"Bad Request",error:"Title, short description, platform, and challenge are required fields."});try{await (0,a.A)();let e={title:i.trim(),short_description:n.trim(),platform:o.trim(),challenge:c.trim(),solutions:m||[],technologies:p||[],outcomes:g||[],is_published:!1!==f};void 0!==s&&(e.role=s?.trim()||void 0),u&&(e.icon=u),l&&(e.gradient=l);let y=await d.A.findByIdAndUpdate(r,e,{new:!0,runValidators:!0}).select("-__v").lean();if(!y)return t.status(404).json({message:"Not Found",error:"Case study not found"});return t.status(200).json({message:"Case study updated successfully",data:{id:y._id.toString(),title:y.title}})}catch(e){if(console.error("Error updating case study:",e),"ValidationError"===e.name){let r=Object.values(e.errors).map(e=>e.message).join(", ");return t.status(400).json({message:"Validation error",error:r})}return t.status(500).json({message:"Error updating case study",error:e.message||"Internal Server Error"})}}let l=(0,s.M)(i,"default"),c=(0,s.M)(i,"config"),m=new n.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/case-studies/update",pathname:"/api/case-studies/update",bundlePath:"",filename:""},userland:i})},944:(e,t,r)=>{r.d(t,{A:()=>s});var i=r(6037),n=r.n(i);let o=new i.Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot exceed 200 characters"]},short_description:{type:String,required:[!0,"Short description is required"],trim:!0,maxlength:[500,"Short description cannot exceed 500 characters"]},platform:{type:String,required:[!0,"Platform is required"],trim:!0},role:{type:String,trim:!0,maxlength:[100,"Role cannot exceed 100 characters"]},icon:{type:String,default:"Cloud"},gradient:{type:String,default:"from-blue-500 to-cyan-500"},challenge:{type:String,required:[!0,"Challenge is required"],trim:!0},solutions:[{title:{type:String,required:!0,trim:!0},description:{type:String,required:!0,trim:!0}}],technologies:[{category:{type:String,required:!0,trim:!0},value:{type:String,required:!0,trim:!0}}],outcomes:[{type:String,trim:!0}],is_published:{type:Boolean,default:!0}},{timestamps:!0});o.index({platform:1}),o.index({is_published:1}),o.index({createdAt:-1});let s=n().models.CaseStudy||n().model("CaseStudy",o)},3480:(e,t,r)=>{e.exports=r(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9194:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(6037),n=r.n(i);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let a=async function(){if(s.conn)return s.conn;s.promise||(s.promise=n().connect(o,{bufferCommands:!1}));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=475);module.exports=r})();